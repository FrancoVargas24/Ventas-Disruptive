<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Disruptive Stickers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="iconos/LOGO + sombra.png">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="script.js" defer></script>
</head>

<body>
    <nav class="navbar">
        <div class="navbar-logo">
            <a href="paginaPrincipal.html"><img src="iconos/LOGO + sombra.png" alt="Logo" /></a>
        </div>
        <button class="navbar-toggle" id="navbar-toggle">&#9776;</button>
        <ul class="navbar-links" id="navbar-links">
            <li><a href="paginaPrincipal.html">Inicio</a></li>
            <li><a href="subCategoria.html">Categorías</a></li>
        </ul>
        <div class="navbar-user">
        </div>
    </nav>

    <main>
        <div class="contornito personalizado-container">
            <h1>Calculadora de personalizados</h1>
            <div class="columnas">
                <div class="contenedor">
                    <label for="material">Material:</label>
                    <div class="botones-materiales">
                        <button style="font-size:20px;" class="material boton-activo" onclick="setMaterial(400, this)">Blanco básico</button>
                        <button style="font-size:20px;" class="material" onclick="setMaterial(800, this)">Holográfico</button>
                        <button style="font-size:20px;" class="material" onclick="setMaterial(500, this)">Clear</button>
                        <button style="font-size:20px;" class="material" onclick="setMaterial(1000, this)">Especiales</button>
                    </div>
                </div>
                <div class="contenedor">
                    <label for="cantidad">Combos por mayor</label>

                    <!-- Botones rápidos -->
                    <div class="botones-materiales"
                        style="flex-direction: row;    justify-content: space-between;     margin-block-end: 2%;">
                        <button class="material" style="padding: 8px 25px;" onclick="setCantidad(50)">50</button>
                        <button class="material" style="padding: 8px 25px;" onclick="setCantidad(100)">100</button>
                        <button class="material" style="padding: 8px 25px;" onclick="setCantidad(200)">200</button>
                        <button class="material" style="padding: 8px 25px;" onclick="setCantidad(400)">400</button>
                    </div>
                    <label for="cantidad">Cantidad de Stickers</label>
                    <input type="number" id="cantidad" placeholder="Cantidad requerida">

                    <label for="dimensiones">Dimensiones:</label>
                    <!-- Botones rápidos medidas -->
                    <div class="botones-materiales"
                        style="flex-direction: row;    justify-content: space-between;     margin-block-end: 2%;">
                        <button class="material" style="padding: 8px 25px;" onclick="setMedidas(6,6)">6x6cm</button>
                        <button class="material" style="padding: 8px 25px;" onclick="setMedidas(5,5)">5x5cm</button>
                        <button class="material" style="padding: 8px 25px;" onclick="setMedidas(4,4)">4x4cm</button>
                    </div>
                    <div class="contenedore">
                        <input type="number" id="ancho" placeholder="Ancho en centímetros">
                        <input type="number" id="alto" placeholder="Alto en centímetros">
                    </div>
                </div>
                <div class="contenedor">
                    <button class="btn btn-aceptar" onclick="calcularTotal()">Calcular Total</button>
                    <div class="contador1">
                        <div id="contador">Total: $0</div>
                        <div id="contadorUnd">La unidad: $0</div>
                    </div>
                </div>
            </div>
            <div class="contenedor">
                <button class="botonWhatsApp" onclick="presupuestoPorWhatsApp()" style="margin-top:10px;"><img
                        src="iconos/wp.png" alt="">Continuar pedido por WhatsApp</button>
            </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script>
        fetch('footer.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            })
            .catch(err => console.error('Error al cargar footer:', err));

        document.getElementById('navbar-toggle').addEventListener('click', function () {
            const links = document.getElementById('navbar-links');
            links.classList.toggle('active');
        });

        function presupuestoPorWhatsApp() {
            const numero = "5491123935400";
            const cantidad = document.getElementById("cantidad").value;
            const ancho = document.getElementById("ancho").value;
            const alto = document.getElementById("alto").value;
            const materialBtn = document.querySelector(".material.boton-activo");
            const material = materialBtn ? materialBtn.textContent : "No seleccionado";

            if (!cantidad || !ancho || !alto || material === "No seleccionado") {
                alert("Completá todos los campos y seleccioná un material.");
                return;
            }

            const mensaje = `¡Hola! Quiero pedir un presupuesto personalizado:\n\n- Cantidad: ${cantidad}\n- Medidas: ${ancho}cm x ${alto}cm\n- Material: ${material}\n\n¿Me pasás los tiempos de produccion y cómo seguir?`;
            const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }
        function setMedidas(ancho, alto) {
            document.getElementById("ancho").value = ancho;
            document.getElementById("alto").value = alto;
        }

        let valorMaterial = 0;
        let totalActual = 0;
        let totalUnidad = 0;
        let descuentoAplicado = false;

        window.onload = function () {
            const btnBlancoBasico = document.querySelector("button.material.boton-activo");
            setMaterial(400, btnBlancoBasico);

            // Enter para calcular total
            document.querySelectorAll("#cantidad, #ancho, #alto").forEach(input => {
                input.addEventListener("keypress", function (e) {
                    if (e.key === "Enter") {
                        e.preventDefault();
                        calcularTotal();
                    }
                });
            });
        };

        function setMaterial(valor, boton) {
            valorMaterial = valor;
            document.querySelectorAll(".material").forEach(b => b.classList.remove("boton-activo"));
            boton.classList.add("boton-activo");
        }

        function setCantidad(valor) {
            document.getElementById("cantidad").value = valor;
        }

        function calcularTotal() {
            const cantidad = parseInt(document.getElementById("cantidad").value) || 0;
            const ancho = parseFloat(document.getElementById("ancho").value) || 0;
            const alto = parseFloat(document.getElementById("alto").value) || 0;

            if (cantidad <= 0 || ancho <= 0 || alto <= 0 || valorMaterial <= 0) {
                alert("Completá todos los campos y seleccioná un material.");
                return;
            }

            let cm6x6Estandar = 36;
            let valorPorCm2 = valorMaterial / cm6x6Estandar;

            if (cantidad >= 400) {
                valorPorCm2 *= 0.625;
            } else if (cantidad >= 200) {
                valorPorCm2 *= 0.75;
            } else if (cantidad >= 100) {
                valorPorCm2 *= 0.875;
            } else if (cantidad >= 50) {
                valorPorCm2 *= 1;
            } else {
                valorPorCm2 *= 1.5;
            }

            totalActual = Math.ceil((ancho * alto * valorPorCm2) * cantidad);
            totalUnidad = Math.ceil((ancho * alto * valorPorCm2));

            descuentoAplicado = false;
            document.getElementById("contador").innerText = `Total: $${totalActual}`;
            document.getElementById("contadorUnd").innerText = `La unidad: $${totalUnidad}`;
        }

        function aplicarDescuento() {
            if (totalActual === 0) {
                alert("Primero calculá el total.");
                return;
            }
            if (descuentoAplicado) {
                alert("El descuento ya fue aplicado.");
                return;
            }
            const descuento = 0.2;
            const totalConDescuento = Math.ceil(totalActual * (1 - descuento));
            document.getElementById("contador").innerText = `Vendedor: $${totalConDescuento}`;
            descuentoAplicado = true;
        }
    </script>
</body>

</html>